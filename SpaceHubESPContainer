local CoreGui = game.CoreGui
local RunService = game:GetService("RunService")

-- ESP

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local Camera = workspace.CurrentCamera

local SpaceHubESPFolder = Instance.new("Folder")
SpaceHubESPFolder.Name = "SpaceHubESPFolder"
SpaceHubESPFolder.Parent = CoreGui

print("Created Folder")

-- Rocket

local ROCKET_LINE_THICKNESS = 1
local ROCKET_OFFSET_Y = 40

for _, RocketGuiName in ipairs({ "RocketLines", "RocketBoxes", "RocketNames" }) do
	local RocketOldGui = CoreGui:FindFirstChild(RocketGuiName)
	if RocketOldGui then
		RocketOldGui:Destroy()
	end
end

local RocketLineGui = Instance.new("ScreenGui")
RocketLineGui.Name = "RocketLines"
RocketLineGui.IgnoreGuiInset = true
RocketLineGui.DisplayOrder = 1000
RocketLineGui.ResetOnSpawn = false
RocketLineGui.Parent = SpaceHubESPFolder
RocketLineGui.Enabled = false
RocketLineGui.Enabled = false

local RocketBoxGui = Instance.new("ScreenGui")
RocketBoxGui.Name = "RocketBoxes"
RocketBoxGui.IgnoreGuiInset = true
RocketBoxGui.DisplayOrder = 1001
RocketBoxGui.ResetOnSpawn = false
RocketBoxGui.Parent = SpaceHubESPFolder
RocketBoxGui.Enabled = false

local RocketNameGui = Instance.new("ScreenGui")
RocketNameGui.Name = "RocketNames"
RocketNameGui.IgnoreGuiInset = true
RocketNameGui.DisplayOrder = 1002
RocketNameGui.ResetOnSpawn = false
RocketNameGui.Parent = SpaceHubESPFolder
RocketNameGui.Enabled = false

local RocketTrackedModels = {}

local function makeRocketLine()
	local RocketLine = Instance.new("Frame")
	RocketLine.Size = UDim2.fromOffset(10, ROCKET_LINE_THICKNESS)
	RocketLine.AnchorPoint = Vector2.new(0.5, 0.5)
	RocketLine.BorderSizePixel = 0
	RocketLine.BackgroundColor3 = Color3.fromRGB(255,255,255)
	RocketLine.Visible = false
	RocketLine.Parent = RocketLineGui
	return RocketLine
end

local function makeRocketBox()
	local RocketBox = Instance.new("Frame")
	RocketBox.AnchorPoint = Vector2.new(0.5, 0.5)
	RocketBox.BackgroundTransparency = 1
	RocketBox.Visible = false
	RocketBox.Parent = RocketBoxGui

	local RocketBoxAspect = Instance.new("UIAspectRatioConstraint")
	RocketBoxAspect.AspectRatio = 1
	RocketBoxAspect.Parent = RocketBox

	local RocketBoxStroke = Instance.new("UIStroke")
	RocketBoxStroke.Thickness = 1.5
	RocketBoxStroke.Color = Color3.fromRGB(255,255,255)
	RocketBoxStroke.Parent = RocketBox

	return RocketBox
end

local function makeRocketNameLabel()
	local RocketNameLabel = Instance.new("TextLabel")
	RocketNameLabel.AnchorPoint = Vector2.new(0.5, 1)
	RocketNameLabel.BackgroundTransparency = 1
	RocketNameLabel.TextColor3 = Color3.fromRGB(255,255,255)
	RocketNameLabel.TextScaled = true
	RocketNameLabel.Font = Enum.Font.Gotham
	RocketNameLabel.Visible = false
	RocketNameLabel.Parent = RocketNameGui

	local RocketNameAspect = Instance.new("UIAspectRatioConstraint")
	RocketNameAspect.AspectRatio = 5
	RocketNameAspect.Parent = RocketNameLabel

	return RocketNameLabel
end

local function getModelPosition(model)
	local main = model:FindFirstChild("Main")
	if main and main:IsA("BasePart") then
		return main.Position
	end
	local cf,_ = model:GetBoundingBox()
	return cf.Position
end

local function addRocketModel(model)
	if model:IsA("Model") and not RocketTrackedModels[model] then
		RocketTrackedModels[model] = {
			RocketLine = makeRocketLine(),
			RocketBox = makeRocketBox(),
			RocketNameLabel = makeRocketNameLabel()
		}
	end
end

local function bindRockets(rockets)
	for _, m in ipairs(rockets:GetChildren()) do
		addRocketModel(m)
	end
	rockets.ChildAdded:Connect(addRocketModel)
end

local rockets = workspace:FindFirstChild("Rockets")
if rockets then
	bindRockets(rockets)
end

workspace.ChildAdded:Connect(function(obj)
	if obj.Name == "Rockets" then
		bindRockets(obj)
	end
end)

RunService.RenderStepped:Connect(function()
	local RocketViewport = Camera.ViewportSize
	local RocketSourceX = RocketViewport.X / 2
	local RocketSourceY = ROCKET_OFFSET_Y

	for model, RocketData in pairs(RocketTrackedModels) do
		local RocketLine = RocketData.RocketLine
		local RocketBox = RocketData.RocketBox
		local RocketNameLabel = RocketData.RocketNameLabel

		local localPlayerSeat = LocalPlayer.Character
			and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
			and LocalPlayer.Character:FindFirstChildOfClass("Humanoid").SeatPart
		local hideForLocal = localPlayerSeat and localPlayerSeat:IsDescendantOf(model)

		if model.Parent and not hideForLocal then
			local RocketWorldPos = getModelPosition(model)
			local RocketScreenPos, RocketVisible = Camera:WorldToViewportPoint(RocketWorldPos)

			if RocketVisible then
				local RocketDX = RocketScreenPos.X - RocketSourceX
				local RocketDY = RocketScreenPos.Y - RocketSourceY
				local RocketDistance = math.sqrt(RocketDX^2 + RocketDY^2)

				RocketLine.Visible = true
				RocketLine.Size = UDim2.fromOffset(RocketDistance, ROCKET_LINE_THICKNESS)
				RocketLine.Position = UDim2.fromOffset((RocketScreenPos.X + RocketSourceX)/2, (RocketScreenPos.Y + RocketSourceY)/2)
				RocketLine.Rotation = math.deg(math.atan2(RocketDY, RocketDX))

				local RocketScale = math.clamp(RocketScreenPos.Z / 400, 0.01, 0.045)
				RocketBox.Visible = true
				RocketBox.Position = UDim2.fromOffset(RocketScreenPos.X, RocketScreenPos.Y)
				RocketBox.Size = UDim2.fromScale(RocketScale, RocketScale)

				local launchMode = model:GetAttribute("launchMode")
				local isShuttle = model:GetAttribute("destinationNum") ~= nil
				local color = Color3.fromRGB(255,255,255)

				if launchMode then
					color = Color3.fromRGB(255,255,0)
				elseif isShuttle then
					color = Color3.fromRGB(0,170,255)
				end

				RocketLine.BackgroundColor3 = color
				if RocketBox:FindFirstChildWhichIsA("UIStroke") then
					RocketBox:FindFirstChildWhichIsA("UIStroke").Color = color
				end

				if RocketNameLabel then
					local RocketDistText = math.floor((Camera.CFrame.Position - RocketWorldPos).Magnitude)
					local RocketText

					if isShuttle then
						RocketText = "Shuttle | "..RocketDistText.." studs"
					elseif launchMode then
						local ownerName = "No One Owned"
						local ownerId = model:GetAttribute("lastPilotId")
						if ownerId and ownerId ~= 0 then
							local player = Players:GetPlayerByUserId(ownerId)
							if player then
								ownerName = player.DisplayName
							end
						end
						RocketText = ownerName.."'s Ship | "..RocketDistText.." studs | Launching"
					else
						local ownerName = "No One Owned"
						local ownerId = model:GetAttribute("lastPilotId")
						if ownerId and ownerId ~= 0 then
							local player = Players:GetPlayerByUserId(ownerId)
							if player then
								ownerName = player.DisplayName
							end
						end
						RocketText = ownerName.."'s Ship | "..RocketDistText.." studs"
					end

					RocketNameLabel.Text = RocketText
					RocketNameLabel.Position = UDim2.fromOffset(RocketScreenPos.X, RocketScreenPos.Y - 10)
					local RocketLabelScale = math.clamp(RocketScreenPos.Z / 400, 0.1, 0.1)
					RocketNameLabel.Size = UDim2.fromScale(RocketLabelScale, RocketLabelScale)
					RocketNameLabel.Visible = true
				end
			else
				RocketLine.Visible = false
				RocketBox.Visible = false
				if RocketNameLabel then RocketNameLabel.Visible = false end
			end
		else
			RocketLine.Visible = false
			RocketBox.Visible = false
			if RocketNameLabel then RocketNameLabel.Visible = false end
		end
	end
end)


-- UFO

local UFO_LINE_THICKNESS = 1
local UFO_OFFSET_Y = 40
local UFO_DEFAULT_COLOR = Color3.fromRGB(0, 200, 0)

for _, UFOGuiName in ipairs({ "UFOLines", "UFOBoxes", "UFONames" }) do
	local UFOOldGui = CoreGui:FindFirstChild(UFOGuiName)
	if UFOOldGui then
		UFOOldGui:Destroy()
	end
end

local UFOLineGui = Instance.new("ScreenGui")
UFOLineGui.Name = "UFOLines"
UFOLineGui.IgnoreGuiInset = true
UFOLineGui.DisplayOrder = 1000
UFOLineGui.ResetOnSpawn = false
UFOLineGui.Parent = SpaceHubESPFolder
UFOLineGui.Enabled = false

local UFOBoxGui = Instance.new("ScreenGui")
UFOBoxGui.Name = "UFOBoxes"
UFOBoxGui.IgnoreGuiInset = true
UFOBoxGui.DisplayOrder = 1001
UFOBoxGui.ResetOnSpawn = false
UFOBoxGui.Parent = SpaceHubESPFolder
UFOBoxGui.Enabled = false

local UFONameGui = Instance.new("ScreenGui")
UFONameGui.Name = "UFONames"
UFONameGui.IgnoreGuiInset = true
UFONameGui.DisplayOrder = 1002
UFONameGui.ResetOnSpawn = false
UFONameGui.Parent = SpaceHubESPFolder
UFONameGui.Enabled = false

local UFOTrackedModels = {}

local function makeUFOLineFrame()
	local UFOLineFrame = Instance.new("Frame")
	UFOLineFrame.Size = UDim2.fromOffset(10, UFO_LINE_THICKNESS)
	UFOLineFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	UFOLineFrame.BorderSizePixel = 0
	UFOLineFrame.BackgroundColor3 = UFO_DEFAULT_COLOR
	UFOLineFrame.Visible = false
	UFOLineFrame.Parent = UFOLineGui
	return UFOLineFrame
end

local function makeUFOBoxFrame()
	local UFOBoxFrame = Instance.new("Frame")
	UFOBoxFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	UFOBoxFrame.BackgroundTransparency = 1
	UFOBoxFrame.Visible = false
	UFOBoxFrame.Parent = UFOBoxGui

	local UFOBoxAspect = Instance.new("UIAspectRatioConstraint")
	UFOBoxAspect.AspectRatio = 1
	UFOBoxAspect.Parent = UFOBoxFrame

	local UFOBoxStroke = Instance.new("UIStroke")
	UFOBoxStroke.Thickness = 1.5
	UFOBoxStroke.Color = UFO_DEFAULT_COLOR
	UFOBoxStroke.Parent = UFOBoxFrame

	return UFOBoxFrame
end

local function makeUFONameLabel()
	local UFONameLabel = Instance.new("TextLabel")
	UFONameLabel.AnchorPoint = Vector2.new(0.5, 1)
	UFONameLabel.BackgroundTransparency = 1
	UFONameLabel.TextColor3 = UFO_DEFAULT_COLOR
	UFONameLabel.TextScaled = true
	UFONameLabel.Font = Enum.Font.Gotham
	UFONameLabel.Visible = false
	UFONameLabel.Parent = UFONameGui

	local UFONameAspect = Instance.new("UIAspectRatioConstraint")
	UFONameAspect.AspectRatio = 5
	UFONameAspect.Parent = UFONameLabel

	return UFONameLabel
end

local function ufogetModelPosition(model)
	local main = model:FindFirstChild("Main")
	if main and main:IsA("BasePart") then
		return main.Position
	end
	local cf,_ = model:GetBoundingBox()
	return cf.Position
end

local function isPlayerSittingOnModel(model)
	for _, player in pairs(Players:GetPlayers()) do
		if player.Character then
			local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
			if humanoid then
				local seat = humanoid.SeatPart
				if seat and seat:IsDescendantOf(model) then
					return true
				end
			end
		end
	end
	return false
end

local function addUFOModel(model)
	if model:IsA("Model") and not UFOTrackedModels[model] then
		UFOTrackedModels[model] = {
			UFOLineFrame = makeUFOLineFrame(),
			UFOBoxFrame = makeUFOBoxFrame(),
			UFONameLabel = makeUFONameLabel()
		}
	end
end

local function bindSpecialRockets(specialRockets)
	for _, m in ipairs(specialRockets:GetChildren()) do
		addUFOModel(m)
	end
	specialRockets.ChildAdded:Connect(addUFOModel)
end

local specialRockets = workspace:FindFirstChild("SpecialRockets")
if specialRockets then
	bindSpecialRockets(specialRockets)
end

workspace.ChildAdded:Connect(function(obj)
	if obj.Name == "SpecialRockets" then
		bindSpecialRockets(obj)
	end
end)

RunService.RenderStepped:Connect(function()
	local UFOViewport = Camera.ViewportSize
	local UFOSourceX = UFOViewport.X / 2
	local UFOSourceY = UFO_OFFSET_Y

	for model, UFOData in pairs(UFOTrackedModels) do
		local UFOLineFrame = UFOData.UFOLineFrame
		local UFOBoxFrame = UFOData.UFOBoxFrame
		local UFONameLabel = UFOData.UFONameLabel

		if model.Parent and not isPlayerSittingOnModel(model) then
			local UFOWorldPos = ufogetModelPosition(model)
			local UFOScreenPos, UFOVisible = Camera:WorldToViewportPoint(UFOWorldPos)

			if UFOVisible then
				local UFODX = UFOScreenPos.X - UFOSourceX
				local UFODY = UFOScreenPos.Y - UFOSourceY
				local UFODistance = math.sqrt(UFODX^2 + UFODY^2)

				UFOLineFrame.Visible = true
				UFOLineFrame.Size = UDim2.fromOffset(UFODistance, UFO_LINE_THICKNESS)
				UFOLineFrame.Position = UDim2.fromOffset((UFOScreenPos.X + UFOSourceX)/2, (UFOScreenPos.Y + UFOSourceY)/2)
				UFOLineFrame.Rotation = math.deg(math.atan2(UFODY, UFODX))

				local UFOScale = math.clamp(UFOScreenPos.Z / 400, 0.01, 0.045)
				UFOBoxFrame.Visible = true
				UFOBoxFrame.Position = UDim2.fromOffset(UFOScreenPos.X, UFOScreenPos.Y)
				UFOBoxFrame.Size = UDim2.fromScale(UFOScale, UFOScale)

				if UFONameLabel then
					local UFODistanceText = math.floor((Camera.CFrame.Position - UFOWorldPos).Magnitude)
					local UFOName = (model.Name == "AlienShip1" and "UFO 1") or (model.Name == "AlienShip2" and "UFO 2") or model.Name
					local UFOSpeed = model:GetAttribute("speedNeeded") or 0

					local UFOCargoFolder = model:FindFirstChild("Cargo")
					local UFOCargoText = "None"
					if UFOCargoFolder then
						local items = {}
						for _, cfg in ipairs(UFOCargoFolder:GetChildren()) do
							table.insert(items, cfg.Name)
						end
						if #items > 0 then
							UFOCargoText = table.concat(items, ", ")
						end
					end

					UFONameLabel.Text = UFOName.." | "..UFODistanceText.." studs | Speed: "..UFOSpeed.." | Cargo: "..UFOCargoText
					UFONameLabel.Position = UDim2.fromOffset(UFOScreenPos.X, UFOScreenPos.Y - 12.5)
					local UFONameLabelScale = math.clamp(UFOScreenPos.Z / 400, 0.1, 0.1)
					UFONameLabel.Size = UDim2.fromScale(UFONameLabelScale, UFONameLabelScale)
					UFONameLabel.Visible = true
				end
			else
				UFOLineFrame.Visible = false
				UFOBoxFrame.Visible = false
				if UFONameLabel then UFONameLabel.Visible = false end
			end
		else
			UFOLineFrame.Visible = false
			UFOBoxFrame.Visible = false
			if UFONameLabel then UFONameLabel.Visible = false end
		end
	end
end)

-- Orb

local ORB_LINE_THICKNESS = 1
local ORB_OFFSET_Y = 40
local ORB_DEFAULT_COLOR = Color3.fromRGB(170,170,255)

for _, OrbGuiName in ipairs({ "OrbLines", "OrbBoxes", "OrbNames" }) do
	local Old = CoreGui:FindFirstChild(OrbGuiName)
	if Old then Old:Destroy() end
end

local OrbLineGui = Instance.new("ScreenGui")
OrbLineGui.Name = "OrbLines"
OrbLineGui.IgnoreGuiInset = true
OrbLineGui.DisplayOrder = 1000
OrbLineGui.ResetOnSpawn = false
OrbLineGui.Enabled = false
OrbLineGui.Parent = SpaceHubESPFolder

local OrbBoxGui = Instance.new("ScreenGui")
OrbBoxGui.Name = "OrbBoxes"
OrbBoxGui.IgnoreGuiInset =true
OrbBoxGui.DisplayOrder = 1001
OrbBoxGui.ResetOnSpawn = false
OrbBoxGui.Enabled = false
OrbBoxGui.Parent = SpaceHubESPFolder

local OrbNameGui = Instance.new("ScreenGui")
OrbNameGui.Name = "OrbNames"
OrbNameGui.IgnoreGuiInset = true
OrbNameGui.DisplayOrder = 1002
OrbNameGui.ResetOnSpawn = false
OrbNameGui.Enabled = false
OrbNameGui.Parent = SpaceHubESPFolder

local OrbTrackedParts = {}

local function hideOrb(data)
	data.Line.Visible = false
	data.Box.Visible = false
	data.Name.Visible = false
end

local function makeLine()
	local f = Instance.new("Frame")
	f.Size = UDim2.fromOffset(10, ORB_LINE_THICKNESS)
	f.AnchorPoint = Vector2.new(0.5, 0.5)
	f.BorderSizePixel = 0
	f.BackgroundColor3 = ORB_DEFAULT_COLOR
	f.Visible = false
	f.Parent = OrbLineGui
	return f
end

local function makeBox()
	local f = Instance.new("Frame")
	f.AnchorPoint = Vector2.new(0.5, 0.5)
	f.BackgroundTransparency = 1
	f.Visible = false
	f.Parent = OrbBoxGui

	local a = Instance.new("UIAspectRatioConstraint")
	a.AspectRatio = 1
	a.Parent = f

	local s = Instance.new("UIStroke")
	s.Thickness = 1.5
	s.Color = ORB_DEFAULT_COLOR
	s.Parent = f

	return f
end

local function makeName()
	local t = Instance.new("TextLabel")
	t.AnchorPoint = Vector2.new(0.5, 1)
	t.BackgroundTransparency = 1
	t.TextColor3 = ORB_DEFAULT_COLOR
	t.TextScaled = true
	t.Font = Enum.Font.Gotham
	t.Visible = false
	t.Parent = OrbNameGui

	local a = Instance.new("UIAspectRatioConstraint")
	a.AspectRatio = 5
	a.Parent = t

	return t
end

local function addOrbPart(part)
	if not part:IsA("BasePart") then return end
	if not part.Name:match("Orb$") then return end
	if OrbTrackedParts[part] then return end

	local hp = part:GetAttribute("hitpoints")
	if not hp or hp <= 0 then return end

	OrbTrackedParts[part] = {
		Line = makeLine(),
		Box = makeBox(),
		Name = makeName()
	}

	part:GetAttributeChangedSignal("hitpoints"):Connect(function()
		local newHp = part:GetAttribute("hitpoints")
		if not newHp or newHp <= 0 then
			hideOrb(OrbTrackedParts[part])
			OrbTrackedParts[part] = nil
		end
	end)

	part.AncestryChanged:Connect(function(_, parent)
		if not parent and OrbTrackedParts[part] then
			hideOrb(OrbTrackedParts[part])
			OrbTrackedParts[part] = nil
		end
	end)
end

local function bindOrbRoot(root)
	for _, model in ipairs(root:GetChildren()) do
		local minerals = model:FindFirstChild("Minerals", true)
		if minerals then
			for _, p in ipairs(minerals:GetChildren()) do
				addOrbPart(p)
			end
			minerals.ChildAdded:Connect(addOrbPart)
		end
	end
end

for _, name in ipairs({ "Planets", "Planetoids" }) do
	local folder = workspace:FindFirstChild(name)
	if folder then
		bindOrbRoot(folder)
	end
end

workspace.ChildAdded:Connect(function(c)
	if c.Name == "Planets" or c.Name == "Planetoids" then
		bindOrbRoot(c)
	end
end)

RunService.RenderStepped:Connect(function()
	local vp = Camera.ViewportSize
	local sx = vp.X / 2
	local sy = ORB_OFFSET_Y

	for part, data in pairs(OrbTrackedParts) do
		local hp = part:GetAttribute("hitpoints")
		if not part.Parent or not hp or hp <= 0 then
			hideOrb(data)
			OrbTrackedParts[part] = nil
			continue
		end

		local pos, vis = Camera:WorldToViewportPoint(part.Position)
		if not vis then
			hideOrb(data)
			continue
		end

		local dx = pos.X - sx
		local dy = pos.Y - sy
		local dist = math.sqrt(dx*dx + dy*dy)

		data.Line.Size = UDim2.fromOffset(dist, ORB_LINE_THICKNESS)
		data.Line.Position = UDim2.fromOffset((pos.X + sx)/2, (pos.Y + sy)/2)
		data.Line.Rotation = math.deg(math.atan2(dy, dx))
		data.Line.Visible = true

		local scale = math.clamp(pos.Z / 400, 0.01, 0.03)
		data.Box.Size = UDim2.fromScale(scale, scale)
		data.Box.Position = UDim2.fromOffset(pos.X, pos.Y)
		data.Box.Visible = true

		data.Name.Text =
			part.Name .. " | " ..
			math.floor((Camera.CFrame.Position - part.Position).Magnitude) ..
			" studs"
		data.Name.Position = UDim2.fromOffset(pos.X, pos.Y - 10)
		data.Name.Size = UDim2.fromScale(0.12, 0.12)
		data.Name.Visible = true
	end
end)

-- Resources 
local RESOURCE_LINE_THICKNESS = 1
local RESOURCE_OFFSET_Y = 40
local RESOURCE_RANGE = 500

local RESOURCE_COLOR_GRAY = Color3.fromRGB(170,170,170)
local RESOURCE_COLOR_YELLOW = Color3.fromRGB(255,255,0)
local RESOURCE_COLOR_RED = Color3.fromRGB(255,0,0)

for _, ResourceGuiName in ipairs({ "ResourceLines", "ResourceBoxes", "ResourceNames" }) do
	local ResourceOldGui = CoreGui:FindFirstChild(ResourceGuiName)
	if ResourceOldGui then
		ResourceOldGui:Destroy()
	end
end

local ResourceLineGui = Instance.new("ScreenGui")
ResourceLineGui.Name = "ResourceLines"
ResourceLineGui.IgnoreGuiInset = true
ResourceLineGui.DisplayOrder = 1000
ResourceLineGui.ResetOnSpawn = false
ResourceLineGui.Parent = SpaceHubESPFolder
ResourceLineGui.Enabled = false

local ResourceBoxGui = Instance.new("ScreenGui")
ResourceBoxGui.Name = "ResourceBoxes"
ResourceBoxGui.IgnoreGuiInset = true
ResourceBoxGui.DisplayOrder = 1001
ResourceBoxGui.ResetOnSpawn = false
ResourceBoxGui.Parent = SpaceHubESPFolder
ResourceBoxGui.Enabled = false

local ResourceNameGui = Instance.new("ScreenGui")
ResourceNameGui.Name = "ResourceNames"
ResourceNameGui.IgnoreGuiInset = true
ResourceNameGui.DisplayOrder = 1002
ResourceNameGui.ResetOnSpawn = false
ResourceNameGui.Parent = SpaceHubESPFolder
ResourceNameGui.Enabled = false

local ResourceTrackedParts = {}

local function getResourceHpColor(hp)
	if not hp then
		return RESOURCE_COLOR_GRAY
	elseif hp < 40 then
		return RESOURCE_COLOR_RED
	elseif hp < 60 then
		return RESOURCE_COLOR_YELLOW
	else
		return RESOURCE_COLOR_GRAY
	end
end

-- LINE
local function makeResourceLineFrame()
	local resourceLineFrame = Instance.new("Frame")
	resourceLineFrame.Size = UDim2.fromOffset(10, RESOURCE_LINE_THICKNESS)
	resourceLineFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	resourceLineFrame.BorderSizePixel = 0
	resourceLineFrame.Visible = false
	resourceLineFrame.Parent = ResourceLineGui
	return resourceLineFrame
end

-- BOX
local function makeResourceBoxFrame()
	local resourceBoxFrame = Instance.new("Frame")
	resourceBoxFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	resourceBoxFrame.BackgroundTransparency = 1
	resourceBoxFrame.Visible = false
	resourceBoxFrame.Parent = ResourceBoxGui

	local aspectConstraint = Instance.new("UIAspectRatioConstraint")
	aspectConstraint.AspectRatio = 1
	aspectConstraint.Parent = resourceBoxFrame

	local boxStroke = Instance.new("UIStroke")
	boxStroke.Thickness = 1.5
	boxStroke.Parent = resourceBoxFrame

	return resourceBoxFrame
end

-- NAME
local function makeResourceNameTextLabel()
	local resourceNameLabel = Instance.new("TextLabel")
	resourceNameLabel.AnchorPoint = Vector2.new(0.5, 1)
	resourceNameLabel.BackgroundTransparency = 1
	resourceNameLabel.TextScaled = true
	resourceNameLabel.Font = Enum.Font.Gotham
	resourceNameLabel.Visible = false
	resourceNameLabel.Parent = ResourceNameGui

	local aspectConstraint = Instance.new("UIAspectRatioConstraint")
	aspectConstraint.AspectRatio = 5
	aspectConstraint.Parent = resourceNameLabel

	return resourceNameLabel
end

local function addResourcePart(part, model)
	if not part:IsA("BasePart") then return end
	if part.Name:match("Orb$") then return end
	if ResourceTrackedParts[part] then return end

	ResourceTrackedParts[part] = {
		Line = makeResourceLineFrame(),
		Box = makeResourceBoxFrame(),
		Name = makeResourceNameTextLabel(),
		Model = model
	}
end

local function bindResourceModels(root)
	for _, model in ipairs(root:GetChildren()) do
		local mineralsFolder = model:FindFirstChild("Minerals", true)
		if mineralsFolder then
			for _, mineralPart in ipairs(mineralsFolder:GetChildren()) do
				addResourcePart(mineralPart, model)
			end
			mineralsFolder.ChildAdded:Connect(function(newPart)
				addResourcePart(newPart, model)
			end)
		end
	end
end

for _, folderName in ipairs({ "Planets", "Planetoids", "Centaurs" }) do
	local resourceFolder = workspace:FindFirstChild(folderName)
	if resourceFolder then
		bindResourceModels(resourceFolder)
	end
end

workspace.ChildAdded:Connect(function(child)
	if child.Name == "Planets" or child.Name == "Planetoids" or child.Name == "Centaurs" then
		bindResourceModels(child)
	end
end)

RunService.RenderStepped:Connect(function()
	local viewport = Camera.ViewportSize
	local screenCenterX = viewport.X / 2
	local screenOffsetY = RESOURCE_OFFSET_Y

	local character = Players.LocalPlayer.Character
	local humanoidRootPart = character and character:FindFirstChild("HumanoidRootPart")
	if not humanoidRootPart then return end

	for part, resourceData in pairs(ResourceTrackedParts) do
		local model = resourceData.Model
		local hp = part:GetAttribute("hitpoints")
		local shouldShow = false

		if model and hp and hp > 0 then
			if model.Parent and model.Parent.Name == "Planets" then
				local skinPart = model:FindFirstChild("Skin", true)
				if skinPart and skinPart:IsA("BasePart") then
					shouldShow = (humanoidRootPart.Position - skinPart.Position).Magnitude <= (skinPart.Size.X / 2)
				end
			else
				local boundingCFrame = model:GetBoundingBox()
				shouldShow = (humanoidRootPart.Position - boundingCFrame.Position).Magnitude <= RESOURCE_RANGE
			end
		end

		if shouldShow then
			local screenPos, onScreen = Camera:WorldToViewportPoint(part.Position)
			if onScreen then
				local color = getResourceHpColor(hp)

				resourceData.Line.BackgroundColor3 = color
				resourceData.Box.UIStroke.Color = color
				resourceData.Name.TextColor3 = color

				local dx = screenPos.X - screenCenterX
				local dy = screenPos.Y - screenOffsetY
				local distance = math.sqrt(dx * dx + dy * dy)

				resourceData.Line.Size = UDim2.fromOffset(distance, RESOURCE_LINE_THICKNESS)
				resourceData.Line.Position = UDim2.fromOffset(
					(screenPos.X + screenCenterX) / 2,
					(screenPos.Y + screenOffsetY) / 2
				)
				resourceData.Line.Rotation = math.deg(math.atan2(dy, dx))
				resourceData.Line.Visible = true

				local scale = math.clamp(screenPos.Z / 400, 0.01, 0.045)
				resourceData.Box.Size = UDim2.fromScale(scale, scale)
				resourceData.Box.Position = UDim2.fromOffset(screenPos.X, screenPos.Y)
				resourceData.Box.Visible = true

				resourceData.Name.Text =
					(part:GetAttribute("idName") or part.Name) ..
					" | " ..
					math.floor((humanoidRootPart.Position - part.Position).Magnitude) ..
					" studs"

				resourceData.Name.Position = UDim2.fromOffset(screenPos.X, screenPos.Y - 12.5)
				resourceData.Name.Size = UDim2.fromScale(0.1, 0.1)
				resourceData.Name.Visible = true
			else
				resourceData.Line.Visible = false
				resourceData.Box.Visible = false
				resourceData.Name.Visible = false
			end
		else
			resourceData.Line.Visible = false
			resourceData.Box.Visible = false
			resourceData.Name.Visible = false
		end
	end
end)

-- Artifacts

local ARTIFACT_LINE_THICKNESS = 1
local ARTIFACT_OFFSET_Y = 40

local ARTIFACT_RARITY_COLORS = {
	Common = Color3.fromRGB(255,127,80),
	Rare = Color3.fromRGB(0,170,0),
	Epic = Color3.fromRGB(0,0,139),
	Legendary = Color3.fromRGB(255,170,0),
	Mythic = Color3.fromRGB(170,0,255)
}

for _, ArtifactGuiName in ipairs({ "ArtifactLines", "ArtifactBoxes", "ArtifactNames" }) do
	local ArtifactOldGui = CoreGui:FindFirstChild(ArtifactGuiName)
	if ArtifactOldGui then
		ArtifactOldGui:Destroy()
	end
end

local ArtifactLineGui = Instance.new("ScreenGui")
ArtifactLineGui.Name = "ArtifactLines"
ArtifactLineGui.IgnoreGuiInset = true
ArtifactLineGui.DisplayOrder = 1000
ArtifactLineGui.ResetOnSpawn = false
ArtifactLineGui.Parent = SpaceHubESPFolder
ArtifactLineGui.Enabled = false

local ArtifactBoxGui = Instance.new("ScreenGui")
ArtifactBoxGui.Name = "ArtifactBoxes"
ArtifactBoxGui.IgnoreGuiInset = true
ArtifactBoxGui.DisplayOrder = 1001
ArtifactBoxGui.ResetOnSpawn = false
ArtifactBoxGui.Parent = SpaceHubESPFolder
ArtifactBoxGui.Enabled = false

local ArtifactNameGui = Instance.new("ScreenGui")
ArtifactNameGui.Name = "ArtifactNames"
ArtifactNameGui.IgnoreGuiInset = true
ArtifactNameGui.DisplayOrder = 1002
ArtifactNameGui.ResetOnSpawn = false
ArtifactNameGui.Parent = SpaceHubESPFolder
ArtifactNameGui.Enabled = false

local ArtifactTrackedParts = {}

local function makeArtifactLineFrame()
	local ArtifactLineFrame = Instance.new("Frame")
	ArtifactLineFrame.Size = UDim2.fromOffset(10, ARTIFACT_LINE_THICKNESS)
	ArtifactLineFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	ArtifactLineFrame.BorderSizePixel = 0
	ArtifactLineFrame.Visible = false
	ArtifactLineFrame.Parent = ArtifactLineGui
	return ArtifactLineFrame
end

local function makeArtifactBoxFrame()
	local ArtifactBoxFrame = Instance.new("Frame")
	ArtifactBoxFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	ArtifactBoxFrame.BackgroundTransparency = 1
	ArtifactBoxFrame.Visible = false
	ArtifactBoxFrame.Parent = ArtifactBoxGui

	local ArtifactBoxAspect = Instance.new("UIAspectRatioConstraint")
	ArtifactBoxAspect.AspectRatio = 1
	ArtifactBoxAspect.Parent = ArtifactBoxFrame

	local ArtifactBoxStroke = Instance.new("UIStroke")
	ArtifactBoxStroke.Thickness = 1.5
	ArtifactBoxStroke.Parent = ArtifactBoxFrame

	return ArtifactBoxFrame
end

local function makeArtifactNameTextLabel()
	local ArtifactNameTextLabel = Instance.new("TextLabel")
	ArtifactNameTextLabel.AnchorPoint = Vector2.new(0.5, 1)
	ArtifactNameTextLabel.BackgroundTransparency = 1
	ArtifactNameTextLabel.TextScaled = true
	ArtifactNameTextLabel.Font = Enum.Font.Gotham
	ArtifactNameTextLabel.Visible = false
	ArtifactNameTextLabel.Parent = ArtifactNameGui

	local ArtifactNameAspect = Instance.new("UIAspectRatioConstraint")
	ArtifactNameAspect.AspectRatio = 5
	ArtifactNameAspect.Parent = ArtifactNameTextLabel

	return ArtifactNameTextLabel
end

local function getArtifactWorldPosition(ArtifactObject)
	if ArtifactObject:IsA("BasePart") then
		return ArtifactObject.Position
	end
	local ArtifactCF, _ = ArtifactObject:GetBoundingBox()
	return ArtifactCF.Position
end

local function addArtifactPart(ArtifactPart)
	if not ArtifactPart:IsA("BasePart") then return end
	if ArtifactTrackedParts[ArtifactPart] then return end

	ArtifactTrackedParts[ArtifactPart] = {
		ArtifactLineFrame = makeArtifactLineFrame(),
		ArtifactBoxFrame = makeArtifactBoxFrame(),
		ArtifactNameLabel = makeArtifactNameTextLabel(),
		ArtifactParentPlanet = ArtifactPart.Parent and ArtifactPart.Parent.Parent
	}
end

local function bindArtifactPlanets(ArtifactPlanetsFolder)
	for _, ArtifactPlanet in ipairs(ArtifactPlanetsFolder:GetChildren()) do
		local ArtifactFolder = ArtifactPlanet:FindFirstChild("Artifacts")
		if ArtifactFolder then
			for _, ArtifactPart in ipairs(ArtifactFolder:GetChildren()) do
				addArtifactPart(ArtifactPart)
			end
			ArtifactFolder.ChildAdded:Connect(addArtifactPart)
		end
	end
end

local ArtifactPlanetsRoot = workspace:FindFirstChild("Planets")
if ArtifactPlanetsRoot then
	bindArtifactPlanets(ArtifactPlanetsRoot)
end

workspace.ChildAdded:Connect(function(ArtifactChild)
	if ArtifactChild.Name == "Planets" then
		bindArtifactPlanets(ArtifactChild)
	end
end)

RunService.RenderStepped:Connect(function()
	local ArtifactViewport = Camera.ViewportSize
	local ArtifactSourceX = ArtifactViewport.X / 2
	local ArtifactSourceY = ARTIFACT_OFFSET_Y

	local ArtifactCharacter = LocalPlayer.Character
	local ArtifactHRP = ArtifactCharacter and ArtifactCharacter:FindFirstChild("HumanoidRootPart")
	if not ArtifactHRP then return end

	for ArtifactPart, ArtifactData in pairs(ArtifactTrackedParts) do
		local ArtifactLineFrame = ArtifactData.ArtifactLineFrame
		local ArtifactBoxFrame = ArtifactData.ArtifactBoxFrame
		local ArtifactNameLabel = ArtifactData.ArtifactNameLabel
		local ArtifactPlanet = ArtifactData.ArtifactParentPlanet
		local ArtifactSkin = ArtifactPlanet and ArtifactPlanet:FindFirstChild("Skin")

		local ArtifactInsideSkin = false
		if ArtifactSkin and ArtifactSkin:IsA("BasePart") then
			ArtifactInsideSkin =
				(ArtifactHRP.Position - ArtifactSkin.Position).Magnitude
				<= (ArtifactSkin.Size.X / 2)
		end

		if ArtifactPart.Parent and ArtifactInsideSkin then
			local ArtifactScreenPos, ArtifactVisible =
				Camera:WorldToViewportPoint(getArtifactWorldPosition(ArtifactPart))

			if ArtifactVisible then
				local ArtifactRarity = ArtifactPart:GetAttribute("rarity")
				local ArtifactColor =
					ARTIFACT_RARITY_COLORS[ArtifactRarity] or Color3.fromRGB(255,255,255)

				ArtifactLineFrame.BackgroundColor3 = ArtifactColor
				ArtifactBoxFrame.UIStroke.Color = ArtifactColor
				ArtifactNameLabel.TextColor3 = ArtifactColor

				local ArtifactDX = ArtifactScreenPos.X - ArtifactSourceX
				local ArtifactDY = ArtifactScreenPos.Y - ArtifactSourceY
				local ArtifactDistance = math.sqrt(ArtifactDX^2 + ArtifactDY^2)

				ArtifactLineFrame.Visible = true
				ArtifactLineFrame.Size = UDim2.fromOffset(ArtifactDistance, ARTIFACT_LINE_THICKNESS)
				ArtifactLineFrame.Position = UDim2.fromOffset(
					(ArtifactScreenPos.X + ArtifactSourceX) / 2,
					(ArtifactScreenPos.Y + ArtifactSourceY) / 2
				)
				ArtifactLineFrame.Rotation = math.deg(math.atan2(ArtifactDY, ArtifactDX))

				local ArtifactScale = math.clamp(ArtifactScreenPos.Z / 400, 0.01, 0.045)
				ArtifactBoxFrame.Visible = true
				ArtifactBoxFrame.Position =
					UDim2.fromOffset(ArtifactScreenPos.X, ArtifactScreenPos.Y)
				ArtifactBoxFrame.Size =
					UDim2.fromScale(ArtifactScale, ArtifactScale)

				local ArtifactType =
					ArtifactPart:GetAttribute("aType") or ArtifactPart.Name
				local ArtifactMass =
					ArtifactPart:GetAttribute("mass") or 0
				local ArtifactDistText =
					math.floor((ArtifactHRP.Position -
						getArtifactWorldPosition(ArtifactPart)).Magnitude)

				ArtifactNameLabel.Text =
					ArtifactType ..
					" | " .. ArtifactMass ..
					" Kg | " .. (ArtifactRarity or "Unknown") ..
					" | " .. ArtifactDistText .. " studs"

				ArtifactNameLabel.Position =
					UDim2.fromOffset(ArtifactScreenPos.X, ArtifactScreenPos.Y - 12.5)
				ArtifactNameLabel.Size = UDim2.fromScale(0.1, 0.1)
				ArtifactNameLabel.Visible = true
			else
				ArtifactLineFrame.Visible = false
				ArtifactBoxFrame.Visible = false
				ArtifactNameLabel.Visible = false
			end
		else
			ArtifactLineFrame.Visible = false
			ArtifactBoxFrame.Visible = false
			ArtifactNameLabel.Visible = false
		end
	end
end)

-- Centaur

local CENTAUR_LINE_THICKNESS = 1
local CENTAUR_OFFSET_Y = 40
local CENTAUR_DEFAULT_COLOR = Color3.fromRGB(255,170,127)

for _, CentaurGuiName in ipairs({ "CentaurLines", "CentaurBoxes", "CentaurNames" }) do
	local CentaurOldGui = CoreGui:FindFirstChild(CentaurGuiName)
	if CentaurOldGui then
		CentaurOldGui:Destroy()
	end
end

local CentaurLineGui = Instance.new("ScreenGui")
CentaurLineGui.Name = "CentaurLines"
CentaurLineGui.IgnoreGuiInset = true
CentaurLineGui.DisplayOrder = 1000
CentaurLineGui.ResetOnSpawn = false
CentaurLineGui.Parent = SpaceHubESPFolder
CentaurLineGui.Enabled = false

local CentaurBoxGui = Instance.new("ScreenGui")
CentaurBoxGui.Name = "CentaurBoxes"
CentaurBoxGui.IgnoreGuiInset = true
CentaurBoxGui.DisplayOrder = 1001
CentaurBoxGui.ResetOnSpawn = false
CentaurBoxGui.Parent = SpaceHubESPFolder
CentaurBoxGui.Enabled = false

local CentaurNameGui = Instance.new("ScreenGui")
CentaurNameGui.Name = "CentaurNames"
CentaurNameGui.IgnoreGuiInset = true
CentaurNameGui.DisplayOrder = 1002
CentaurNameGui.ResetOnSpawn = false
CentaurNameGui.Parent = SpaceHubESPFolder
CentaurNameGui.Enabled = false

local CentaurTrackedModels = {}

local function makeCentaurLineFrame()
	local CentaurLineFrame = Instance.new("Frame")
	CentaurLineFrame.Size = UDim2.fromOffset(10, CENTAUR_LINE_THICKNESS)
	CentaurLineFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	CentaurLineFrame.BorderSizePixel = 0
	CentaurLineFrame.BackgroundColor3 = CENTAUR_DEFAULT_COLOR
	CentaurLineFrame.Visible = false
	CentaurLineFrame.Parent = CentaurLineGui
	return CentaurLineFrame
end

local function makeCentaurBoxFrame()
	local CentaurBoxFrame = Instance.new("Frame")
	CentaurBoxFrame.AnchorPoint = Vector2.new(0.5, 0.5)
	CentaurBoxFrame.BackgroundTransparency = 1
	CentaurBoxFrame.Visible = false
	CentaurBoxFrame.Parent = CentaurBoxGui

	local CentaurBoxAspect = Instance.new("UIAspectRatioConstraint")
	CentaurBoxAspect.AspectRatio = 1
	CentaurBoxAspect.Parent = CentaurBoxFrame

	local CentaurBoxStroke = Instance.new("UIStroke")
	CentaurBoxStroke.Thickness = 1.5
	CentaurBoxStroke.Color = CENTAUR_DEFAULT_COLOR
	CentaurBoxStroke.Parent = CentaurBoxFrame

	return CentaurBoxFrame
end

local function makeCentaurNameTextLabel()
	local CentaurNameTextLabel = Instance.new("TextLabel")
	CentaurNameTextLabel.AnchorPoint = Vector2.new(0.5, 1)
	CentaurNameTextLabel.BackgroundTransparency = 1
	CentaurNameTextLabel.TextColor3 = CENTAUR_DEFAULT_COLOR
	CentaurNameTextLabel.TextScaled = true
	CentaurNameTextLabel.Font = Enum.Font.Gotham
	CentaurNameTextLabel.Visible = false
	CentaurNameTextLabel.Parent = CentaurNameGui

	local CentaurNameAspect = Instance.new("UIAspectRatioConstraint")
	CentaurNameAspect.AspectRatio = 5
	CentaurNameAspect.Parent = CentaurNameTextLabel

	return CentaurNameTextLabel
end

local function getCentaurModelWorldPosition(CentaurModel)
	local CentaurCF, _ = CentaurModel:GetBoundingBox()
	return CentaurCF.Position
end

local function addCentaurModelToTrack(CentaurModel)
	if CentaurModel:IsA("Model") and not CentaurTrackedModels[CentaurModel] then
		CentaurTrackedModels[CentaurModel] = {
			CentaurLineFrame = makeCentaurLineFrame(),
			CentaurBoxFrame = makeCentaurBoxFrame(),
			CentaurNameLabel = makeCentaurNameTextLabel()
		}

		local CentaurMineralsFolder = CentaurModel:FindFirstChild("Minerals")
		if CentaurMineralsFolder then
			for _, CentaurMineral in ipairs(CentaurMineralsFolder:GetChildren()) do
				if CentaurMineral:GetAttribute("hitpoints") then
					CentaurMineral:GetAttributeChangedSignal("hitpoints"):Connect(function()
						local CentaurAlive = false
						for _, CentaurCheck in ipairs(CentaurMineralsFolder:GetChildren()) do
							local CentaurHP = CentaurCheck:GetAttribute("hitpoints")
							if type(CentaurHP) == "number" and CentaurHP > 0 then
								CentaurAlive = true
								break
							end
						end

						if not CentaurAlive then
							local CentaurData = CentaurTrackedModels[CentaurModel]
							CentaurData.CentaurLineFrame.Visible = false
							CentaurData.CentaurBoxFrame.Visible = false
							CentaurData.CentaurNameLabel.Visible = false
						end
					end)
				end
			end
		end
	end
end

local function bindCentaurFolder(CentaurFolder)
	for _, CentaurModel in ipairs(CentaurFolder:GetChildren()) do
		addCentaurModelToTrack(CentaurModel)
	end
	CentaurFolder.ChildAdded:Connect(addCentaurModelToTrack)
end

local function findCentaurRootFolder()
	local CentaurRoot = workspace:FindFirstChild("Centaurs")
	if CentaurRoot then
		bindCentaurFolder(CentaurRoot)
	end
end

findCentaurRootFolder()

workspace.ChildAdded:Connect(function(Child)
	if Child.Name == "Centaurs" then
		bindCentaurFolder(Child)
	end
end)

RunService.RenderStepped:Connect(function()
	local CentaurViewport = Camera.ViewportSize
	local CentaurSourceX = CentaurViewport.X / 2
	local CentaurSourceY = CENTAUR_OFFSET_Y

	for CentaurModel, CentaurData in pairs(CentaurTrackedModels) do
		local CentaurLineFrame = CentaurData.CentaurLineFrame
		local CentaurBoxFrame = CentaurData.CentaurBoxFrame
		local CentaurNameLabel = CentaurData.CentaurNameLabel

		if CentaurModel.Parent then
			local CentaurMineralsFolder = CentaurModel:FindFirstChild("Minerals")
			local CentaurHasAlive = false
			local CentaurResourcesText = "None"
			local CentaurColor = CENTAUR_DEFAULT_COLOR

			if CentaurMineralsFolder then
				local CentaurItems = {}
				for _, CentaurMineral in ipairs(CentaurMineralsFolder:GetChildren()) do
					local CentaurHP = CentaurMineral:GetAttribute("hitpoints")
					if type(CentaurHP) == "number" and CentaurHP > 0 then
						CentaurHasAlive = true
						table.insert(CentaurItems, CentaurMineral.Name)

						if CentaurMineral.Name == "Mythic Crate" then
							CentaurColor = Color3.fromRGB(128,0,128)
						elseif CentaurMineral.Name == "Legendary Crate" then
							CentaurColor = Color3.fromRGB(255,165,0)
						elseif CentaurMineral.Name == "Epic Crate" then
							CentaurColor = Color3.fromRGB(0,0,139)
						elseif CentaurMineral.Name == "Rare Crate" then
							CentaurColor = Color3.fromRGB(0,100,0)
						else
							CentaurColor = CENTAUR_DEFAULT_COLOR
						end
					end
				end

				if #CentaurItems > 0 then
					CentaurResourcesText = table.concat(CentaurItems, ", ")
				end
			end

			if CentaurHasAlive then
				local CentaurWorldPos = getCentaurModelWorldPosition(CentaurModel)
				local CentaurScreenPos, CentaurVisible = Camera:WorldToViewportPoint(CentaurWorldPos)

				if CentaurVisible then
					local CentaurDX = CentaurScreenPos.X - CentaurSourceX
					local CentaurDY = CentaurScreenPos.Y - CentaurSourceY
					local CentaurDistance = math.sqrt(CentaurDX^2 + CentaurDY^2)

					CentaurLineFrame.Visible = true
					CentaurLineFrame.Size = UDim2.fromOffset(CentaurDistance, CENTAUR_LINE_THICKNESS)
					CentaurLineFrame.Position = UDim2.fromOffset(
						(CentaurScreenPos.X + CentaurSourceX) / 2,
						(CentaurScreenPos.Y + CentaurSourceY) / 2
					)
					CentaurLineFrame.Rotation = math.deg(math.atan2(CentaurDY, CentaurDX))
					CentaurLineFrame.BackgroundColor3 = CentaurColor

					local CentaurScale = math.clamp(CentaurScreenPos.Z / 400, 0.01, 0.045)
					CentaurBoxFrame.Visible = true
					CentaurBoxFrame.Position = UDim2.fromOffset(CentaurScreenPos.X, CentaurScreenPos.Y)
					CentaurBoxFrame.Size = UDim2.fromScale(CentaurScale, CentaurScale)
					CentaurBoxFrame.UIStroke.Color = CentaurColor

					local CentaurDistanceText = math.floor(
						(Camera.CFrame.Position - CentaurWorldPos).Magnitude
					)

					CentaurNameLabel.Text =
						CentaurModel.Name ..
						" | " .. CentaurDistanceText ..
						" studs | Resources: " .. CentaurResourcesText

					CentaurNameLabel.Position = UDim2.fromOffset(
						CentaurScreenPos.X,
						CentaurScreenPos.Y - 12.5
					)
					CentaurNameLabel.Size = UDim2.fromScale(0.1, 0.1)
					CentaurNameLabel.Visible = true
				else
					CentaurLineFrame.Visible = false
					CentaurBoxFrame.Visible = false
					CentaurNameLabel.Visible = false
				end
			else
				CentaurLineFrame.Visible = false
				CentaurBoxFrame.Visible = false
				CentaurNameLabel.Visible = false
			end
		else
			CentaurLineFrame.Visible = false
			CentaurBoxFrame.Visible = false
			CentaurNameLabel.Visible = false
		end
	end
end)

---- Voyager + Planet-X ----

local PLANETX_VOYAGER_LINE_THICKNESS = 1
local PLANETX_VOYAGER_OFFSET_Y = 40

for _, name in ipairs({ "PlanetXVoyagerLines", "PlanetXVoyagerBoxes", "PlanetXVoyagerNames" }) do
	local old = CoreGui:FindFirstChild(name)
	if old then old:Destroy() end
end

local PlanetXVoyagerLinesGui = Instance.new("ScreenGui")
PlanetXVoyagerLinesGui.Name = "PlanetXVoyagerLines"
PlanetXVoyagerLinesGui.IgnoreGuiInset = true
PlanetXVoyagerLinesGui.DisplayOrder = 1200
PlanetXVoyagerLinesGui.ResetOnSpawn = false
PlanetXVoyagerLinesGui.Parent = SpaceHubESPFolder
PlanetXVoyagerLinesGui.Enabled = false

local PlanetXVoyagerBoxesGui = Instance.new("ScreenGui")
PlanetXVoyagerBoxesGui.Name = "PlanetXVoyagerBoxes"
PlanetXVoyagerBoxesGui.IgnoreGuiInset = true
PlanetXVoyagerBoxesGui.DisplayOrder = 1201
PlanetXVoyagerBoxesGui.ResetOnSpawn = false
PlanetXVoyagerBoxesGui.Parent = SpaceHubESPFolder
PlanetXVoyagerBoxesGui.Enabled = false

local PlanetXVoyagerNamesGui = Instance.new("ScreenGui")
PlanetXVoyagerNamesGui.Name = "PlanetXVoyagerNames"
PlanetXVoyagerNamesGui.IgnoreGuiInset = true
PlanetXVoyagerNamesGui.DisplayOrder = 1202
PlanetXVoyagerNamesGui.ResetOnSpawn = false
PlanetXVoyagerNamesGui.Parent = SpaceHubESPFolder
PlanetXVoyagerNamesGui.Enabled = false

local function PlanetXVoyager_getColor(objName)
	if objName == "Voyager" then
		return Color3.fromRGB(0, 170, 127)
	elseif objName == "Planet X" then
		return Color3.fromRGB(123, 0, 184)
	end
	return Color3.fromRGB(255, 255, 255)
end

local function PlanetXVoyager_makeLine()
	local PlanetX_Voyager_F = Instance.new("Frame")
	PlanetX_Voyager_F.Size = UDim2.fromOffset(10, PLANETX_VOYAGER_LINE_THICKNESS)
	PlanetX_Voyager_F.AnchorPoint = Vector2.new(0.5, 0.5)
	PlanetX_Voyager_F.BorderSizePixel = 0
	PlanetX_Voyager_F.Visible = false
	PlanetX_Voyager_F.Parent = PlanetXVoyagerLinesGui
	return PlanetX_Voyager_F
end

local function PlanetXVoyager_makeBox()
	local PlanetX_Voyager_box = Instance.new("Frame")
	PlanetX_Voyager_box.AnchorPoint = Vector2.new(0.5, 0.5)
	PlanetX_Voyager_box.BackgroundTransparency = 1
	PlanetX_Voyager_box.Visible = false
	PlanetX_Voyager_box.Parent = PlanetXVoyagerBoxesGui

	local PlanetX_Voyager_aspect = Instance.new("UIAspectRatioConstraint")
	PlanetX_Voyager_aspect.AspectRatio = 1
	PlanetX_Voyager_aspect.Parent = PlanetX_Voyager_box

	local PlanetX_Voyager_stroke = Instance.new("UIStroke")
	PlanetX_Voyager_stroke.Thickness = 1.5
	PlanetX_Voyager_stroke.Parent = PlanetX_Voyager_box

	return PlanetX_Voyager_box
end

local function PlanetXVoyager_makeName()
	local PlanetX_Voyager_label = Instance.new("TextLabel")
	PlanetX_Voyager_label.AnchorPoint = Vector2.new(0.5, 1)
	PlanetX_Voyager_label.BackgroundTransparency = 1
	PlanetX_Voyager_label.TextScaled = true
	PlanetX_Voyager_label.Font = Enum.Font.Gotham
	PlanetX_Voyager_label.Visible = false
	PlanetX_Voyager_label.Parent = PlanetXVoyagerNamesGui

	local PlanetX_Voyager_aspect = Instance.new("UIAspectRatioConstraint")
	PlanetX_Voyager_aspect.AspectRatio = 5
	PlanetX_Voyager_aspect.Parent = PlanetX_Voyager_label

	return PlanetX_Voyager_label
end

local function PlanetXVoyager_addObject(obj)
	if not obj:IsA("Model") then return end

	if not obj.PrimaryPart then
		warn(obj.Name .. " does not have a PrimaryPart set!")
		return
	end

	local name = obj.Name
	local validNames = { "Planet X", "Voyager" }
	if not table.find(validNames, name) then return end

	local line = PlanetXVoyager_makeLine()
	local box = PlanetXVoyager_makeBox()
	local nameLabel = PlanetXVoyager_makeName()

	local function updateESP()
		local pos, visible = Camera:WorldToViewportPoint(obj.PrimaryPart.Position)
		if visible then
			local dx = pos.X - Camera.ViewportSize.X / 2
			local dy = pos.Y - PLANETX_VOYAGER_OFFSET_Y
			local dist = math.sqrt(dx * dx + dy * dy)

			local color = PlanetXVoyager_getColor(obj.Name)

			line.BackgroundColor3 = color
			line.Visible = true
			line.Size = UDim2.fromOffset(dist, PLANETX_VOYAGER_LINE_THICKNESS)
			line.Position = UDim2.fromOffset((pos.X + Camera.ViewportSize.X / 2) / 2, (pos.Y + PLANETX_VOYAGER_OFFSET_Y) / 2)
			line.Rotation = math.deg(math.atan2(dy, dx))

			box.Visible = true
			box.Position = UDim2.fromOffset(pos.X, pos.Y)
			local scale = math.clamp(pos.Z / 400, 0.01, 0.045)
			box.Size = UDim2.fromScale(scale, scale)
			box.UIStroke.Color = color

			local distText = math.floor((Camera.CFrame.Position - obj.PrimaryPart.Position).Magnitude)
			nameLabel.TextColor3 = color
			nameLabel.Text = name == "Planet X" and "Planet-X | " .. distText .. " studs" or "Voyager | " .. distText .. " studs"
			nameLabel.Position = UDim2.fromOffset(pos.X, pos.Y - 12.5)
			nameLabel.Size = UDim2.fromScale(0.1, 0.1)
			nameLabel.Visible = true
		else
			line.Visible = false
			box.Visible = false
			nameLabel.Visible = false
		end
	end

	RunService.RenderStepped:Connect(updateESP)
end

local function PlanetXVoyager_bindFolders()
	local PlanetsFolder = workspace:FindFirstChild("Planets")
	if PlanetsFolder then
		local PlanetX = PlanetsFolder:FindFirstChild("Planet X")
		if PlanetX then
			PlanetXVoyager_addObject(PlanetX)
		end
	end

	local PlanetoidsFolder = workspace:FindFirstChild("Planetoids")
	if PlanetoidsFolder then
		local Voyager = PlanetoidsFolder:FindFirstChild("Voyager")
		if Voyager then
			PlanetXVoyager_addObject(Voyager)
		end
	end
end

PlanetXVoyager_bindFolders()

workspace.ChildAdded:Connect(function(obj)
	if obj.Name == "Planets" or obj.Name == "Planetoids" then
		PlanetXVoyager_bindFolders()
	end
end)

---------------------------------------------------------------------------

local ShipMovements = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local Title = Instance.new("TextLabel")
local SelectionFrame = Instance.new("Frame")
local List = Instance.new("ScrollingFrame")
local UIListLayout = Instance.new("UIListLayout")
local maxSpeed = Instance.new("TextButton")
local UIAspectRatioConstraint_2 = Instance.new("UIAspectRatioConstraint")
local acceleration = Instance.new("TextButton")
local UIAspectRatioConstraint_3 = Instance.new("UIAspectRatioConstraint")
local deceleration = Instance.new("TextButton")
local UIAspectRatioConstraint_4 = Instance.new("UIAspectRatioConstraint")
local agility = Instance.new("TextButton")
local UIAspectRatioConstraint_5 = Instance.new("UIAspectRatioConstraint")
local Info = Instance.new("TextLabel")
local Title1 = Instance.new("TextLabel")
local NumValue = Instance.new("TextBox")
local LoopNumValue = Instance.new("TextBox")
local ApplyBtn = Instance.new("TextButton")
local ToggleLoopBtn = Instance.new("TextButton")
local UIAspectRatioConstraint_6 = Instance.new("UIAspectRatioConstraint")

ShipMovements.Name = "ShipMovements"
ShipMovements.Parent = SpaceHubESPFolder
ShipMovements.ScreenInsets = Enum.ScreenInsets.None
ShipMovements.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ShipMovements.Enabled = false

MainFrame.Name = "MainFrame"
MainFrame.Parent = ShipMovements
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BackgroundTransparency = 0.650
MainFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.Size = UDim2.new(0.36500001, 0, 0.36500001, 0)
MainFrame.ZIndex = 500
local mainFrameStroke = Instance.new("UIStroke")
mainFrameStroke.Parent = MainFrame
mainFrameStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
mainFrameStroke.Color = Color3.fromRGB(255, 255, 255)
mainFrameStroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
mainFrameStroke.Thickness = 0.015
local MainFrameDragger = Instance.new("UIDragDetector")
MainFrameDragger.Parent = MainFrame

UIAspectRatioConstraint.Parent = MainFrame
UIAspectRatioConstraint.AspectRatio = 1.5

Title.Name = "Title"
Title.Parent = MainFrame
Title.AnchorPoint = Vector2.new(0.5, 0)
Title.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title.BackgroundTransparency = 0.800
Title.BorderColor3 = Color3.fromRGB(0, 0, 0)
Title.BorderSizePixel = 0
Title.Position = UDim2.new(0.49999997, 0, 0, 0)
Title.Size = UDim2.new(0.99999994, 0, 0.169872597, 0)
Title.Font = Enum.Font.Arial
Title.Text = "Ship Function Modifier"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextSize = 14.000
Title.TextWrapped = true
local TitleStroke = Instance.new("UIStroke")
TitleStroke.Parent = Title
TitleStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
TitleStroke.Color = Color3.fromRGB(255, 255, 255)
TitleStroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
TitleStroke.Thickness = 0.08

SelectionFrame.Name = "SelectionFrame"
SelectionFrame.Parent = MainFrame
SelectionFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
SelectionFrame.BackgroundTransparency = 0.600
SelectionFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
SelectionFrame.BorderSizePixel = 0
SelectionFrame.Position = UDim2.new(1.06367576, 0, 0.430113614, 0)
SelectionFrame.Size = UDim2.new(0.508703411, 0, 0.565581024, 0)
local SelectionFrameStroke = Instance.new("UIStroke")
SelectionFrameStroke.Parent = SelectionFrame
SelectionFrameStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
SelectionFrameStroke.Color = Color3.fromRGB(255, 255, 255)
SelectionFrameStroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
SelectionFrameStroke.Thickness = 0.022
local SelectionFrameDragger = Instance.new("UIDragDetector")
SelectionFrameDragger.Parent = SelectionFrame
SelectionFrame.ZIndex = 500

List.Name = "List"
List.Parent = SelectionFrame
List.Active = true
List.AnchorPoint = Vector2.new(0.5, 0.5)
List.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
List.BackgroundTransparency = 1.000
List.BorderColor3 = Color3.fromRGB(0, 0, 0)
List.BorderSizePixel = 0
List.Position = UDim2.new(0.5, 0, 0.5, 0)
List.Size = UDim2.new(0.949999988, 0, 0.949999988, 0)
List.ScrollBarThickness = 2
List.ZIndex = 510

UIListLayout.Parent = List
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 5)

maxSpeed.Name = "maxSpeed"
maxSpeed.Parent = List
maxSpeed.BackgroundColor3 = Color3.fromRGB(132, 132, 132)
maxSpeed.BorderColor3 = Color3.fromRGB(0, 0, 0)
maxSpeed.BorderSizePixel = 0
maxSpeed.Size = UDim2.new(1, 0, 1, 0)
maxSpeed.Font = Enum.Font.Arial
maxSpeed.Text = "Speed"
maxSpeed.TextColor3 = Color3.fromRGB(255, 255, 255)
maxSpeed.TextScaled = true
maxSpeed.TextSize = 14.000
maxSpeed.TextWrapped = true
maxSpeed.ZIndex = 520

UIAspectRatioConstraint_2.Parent = maxSpeed
UIAspectRatioConstraint_2.AspectRatio = 3.500

acceleration.Name = "acceleration"
acceleration.Parent = List
acceleration.BackgroundColor3 = Color3.fromRGB(132, 132, 132)
acceleration.BorderColor3 = Color3.fromRGB(0, 0, 0)
acceleration.BorderSizePixel = 0
acceleration.Size = UDim2.new(1, 0, 1, 0)
acceleration.Font = Enum.Font.Arial
acceleration.Text = " Acceleration"
acceleration.TextColor3 = Color3.fromRGB(255, 255, 255)
acceleration.TextScaled = true
acceleration.TextSize = 14.000
acceleration.TextWrapped = true
acceleration.ZIndex = 520

UIAspectRatioConstraint_3.Parent = acceleration
UIAspectRatioConstraint_3.AspectRatio = 3.500

deceleration.Name = "deceleration"
deceleration.Parent = List
deceleration.BackgroundColor3 = Color3.fromRGB(132, 132, 132)
deceleration.BorderColor3 = Color3.fromRGB(0, 0, 0)
deceleration.BorderSizePixel = 0
deceleration.Size = UDim2.new(1, 0, 1, 0)
deceleration.Font = Enum.Font.Arial
deceleration.Text = " Deceleration"
deceleration.TextColor3 = Color3.fromRGB(255, 255, 255)
deceleration.TextScaled = true
deceleration.TextSize = 14.000
deceleration.TextWrapped = true
deceleration.ZIndex = 520

UIAspectRatioConstraint_4.Parent = deceleration
UIAspectRatioConstraint_4.AspectRatio = 3.500

agility.Name = "agility"
agility.Parent = List
agility.BackgroundColor3 = Color3.fromRGB(132, 132, 132)
agility.BorderColor3 = Color3.fromRGB(0, 0, 0)
agility.BorderSizePixel = 0
agility.Size = UDim2.new(1, 0, 1, 0)
agility.Font = Enum.Font.Arial
agility.Text = "Agility"
agility.TextColor3 = Color3.fromRGB(255, 255, 255)
agility.TextScaled = true
agility.TextSize = 14.000
agility.TextWrapped = true
agility.ZIndex = 520

UIAspectRatioConstraint_5.Parent = agility
UIAspectRatioConstraint_5.AspectRatio = 3.500

Info.Name = "Info"
Info.Parent = SelectionFrame
Info.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Info.BackgroundTransparency = 0.600
Info.BorderColor3 = Color3.fromRGB(0, 0, 0)
Info.BorderSizePixel = 0
Info.Position = UDim2.new(-5.59042974e-07, 0, -0.370072424, 0)
Info.Size = UDim2.new(1, 0, 0.2826235, 0)
Info.Font = Enum.Font.Arial
Info.Text = " Select  One "
Info.TextColor3 = Color3.fromRGB(255, 255, 255)
Info.TextScaled = true
Info.TextSize = 14.000
Info.TextWrapped = true
Info.ZIndex = 520
local InfoStroke = Instance.new("UIStroke")
InfoStroke.Parent = Info
InfoStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
InfoStroke.Color = Color3.fromRGB(255, 255, 255)
InfoStroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
InfoStroke.Thickness = 0.05

Title1.Name = "Title1"
Title1.Parent = MainFrame
Title1.AnchorPoint = Vector2.new(0.5, 0)
Title1.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Title1.BackgroundTransparency = 0.800
Title1.BorderColor3 = Color3.fromRGB(0, 0, 0)
Title1.BorderSizePixel = 0
Title1.Position = UDim2.new(0.49999997, 0, 0.538160384, 0)
Title1.Size = UDim2.new(1, 0, 0.150000006, 0)
Title1.Font = Enum.Font.Arial
Title1.Text = "Kuiper Belt Bypass Loop Speed"
Title1.TextColor3 = Color3.fromRGB(255, 255, 255)
Title1.TextScaled = true
Title1.TextSize = 14.000
Title1.TextWrapped = true
local Title1Stroke = Instance.new("UIStroke")
Title1Stroke.Parent = Title1
Title1Stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
Title1Stroke.Color = Color3.fromRGB(255, 255, 255)
Title1Stroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
Title1Stroke.Thickness = 0.05

NumValue.Name = "NumValue"
NumValue.Parent = MainFrame
NumValue.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
NumValue.BackgroundTransparency = 0.600
NumValue.BorderColor3 = Color3.fromRGB(0, 0, 0)
NumValue.BorderSizePixel = 0
NumValue.Position = UDim2.new(0.027956387, 0, 0.220440716, 0)
NumValue.Size = UDim2.new(0.75, 0, 0.25999999, 0)
NumValue.Font = Enum.Font.Arial
NumValue.PlaceholderText = "Number Amount"
NumValue.Text = ""
NumValue.TextColor3 = Color3.fromRGB(255, 255, 255)
NumValue.TextScaled = true
NumValue.TextSize = 14.000
NumValue.TextWrapped = true
local NumValueStroke = Instance.new("UIStroke")
NumValueStroke.Parent = NumValue
NumValueStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
NumValueStroke.Color = Color3.fromRGB(255, 255, 255)
NumValueStroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
NumValueStroke.Thickness = 0.025

LoopNumValue.Name = "LoopNumValue"
LoopNumValue.Parent = MainFrame
LoopNumValue.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
LoopNumValue.BackgroundTransparency = 0.600
LoopNumValue.BorderColor3 = Color3.fromRGB(0, 0, 0)
LoopNumValue.BorderSizePixel = 0
LoopNumValue.Position = UDim2.new(0.027956387, 0, 0.736500025, 0)
LoopNumValue.Size = UDim2.new(0.75, 0, 0.25999999, 0)
LoopNumValue.Font = Enum.Font.Arial
LoopNumValue.PlaceholderText = "Loop Speed Number"
LoopNumValue.Text = ""
LoopNumValue.TextColor3 = Color3.fromRGB(255, 255, 255)
LoopNumValue.TextScaled = true
LoopNumValue.TextSize = 14.000
LoopNumValue.TextWrapped = true
local LoopNumValueStroke = Instance.new("UIStroke")
LoopNumValueStroke.Parent = LoopNumValue
LoopNumValueStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
LoopNumValueStroke.Color = Color3.fromRGB(255, 255, 255)
LoopNumValueStroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
LoopNumValueStroke.Thickness = 0.025

ApplyBtn.Name = "ApplyBtn"
ApplyBtn.Parent = MainFrame
ApplyBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ApplyBtn.BackgroundTransparency = 0.600
ApplyBtn.BorderColor3 = Color3.fromRGB(0, 0, 0)
ApplyBtn.BorderSizePixel = 0
ApplyBtn.Position = UDim2.new(0.810000002, 0, 0.224999994, 0)
ApplyBtn.Size = UDim2.new(0.181999996, 0, 0.25, 0)
ApplyBtn.Font = Enum.Font.Arial
ApplyBtn.Text = "Apply"
ApplyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ApplyBtn.TextScaled = true
ApplyBtn.TextSize = 14.000
ApplyBtn.TextWrapped = true
local ApplyBtnStroke = Instance.new("UIStroke")
ApplyBtnStroke.Parent = ApplyBtn
ApplyBtnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
ApplyBtnStroke.Color = Color3.fromRGB(255, 255, 255)
ApplyBtnStroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
ApplyBtnStroke.Thickness = 0.035

ToggleLoopBtn.Name = "ToggleLoopBtn"
ToggleLoopBtn.Parent = MainFrame
ToggleLoopBtn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
ToggleLoopBtn.BackgroundTransparency = 0.600
ToggleLoopBtn.BorderColor3 = Color3.fromRGB(0, 0, 0)
ToggleLoopBtn.BorderSizePixel = 0
ToggleLoopBtn.Position = UDim2.new(0.810000002, 0, 0.736500025, 0)
ToggleLoopBtn.Size = UDim2.new(0.181999996, 0, 0.25, 0)
ToggleLoopBtn.Font = Enum.Font.Arial
ToggleLoopBtn.Text = "Off"
ToggleLoopBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleLoopBtn.TextScaled = true
ToggleLoopBtn.TextSize = 14.000
ToggleLoopBtn.TextWrapped = true
local ToggleLoopBtnStroke = Instance.new("UIStroke")
ToggleLoopBtnStroke.Parent = ToggleLoopBtn
ToggleLoopBtnStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
ToggleLoopBtnStroke.Color = Color3.fromRGB(255, 255, 255)
ToggleLoopBtnStroke.StrokeSizingMode = Enum.StrokeSizingMode.ScaledSize
ToggleLoopBtnStroke.Thickness = 0.035

UIAspectRatioConstraint_6.Parent = ApplyBtn

local gui = ShipMovements
local selectionFrame = gui.MainFrame.SelectionFrame
local numValueBox = gui.MainFrame.NumValue
local loopNumValueBox = gui.MainFrame.LoopNumValue
local applyBtn = gui.MainFrame.ApplyBtn
local list = selectionFrame.List

local buttonNameToAttr = {
	maxSpeed = "maxSpeed",
	acceleration = "acceleration",
	deceleration = "deceleration",
	agility = "agility"
}

local buttons = {}
local selectedButton = nil

for _, child in ipairs(list:GetChildren()) do
	if child:IsA("TextButton") then
		table.insert(buttons, child)

		child.MouseButton1Click:Connect(function()
			for _, b in ipairs(buttons) do
				b.BackgroundColor3 = Color3.fromRGB(132,132,132)
			end
			child.BackgroundColor3 = Color3.fromRGB(85,170,85)
			selectedButton = child
		end)
	end
end

local function getSeatMain()
	local character = game.Players.LocalPlayer.Character
	if character then
		local humanoid = character:FindFirstChildOfClass("Humanoid")
		if humanoid and humanoid.SeatPart then
			local seat = humanoid.SeatPart
			local main = seat.Parent:FindFirstChild("Main")
			return main
		end
	end
	return nil
end

applyBtn.MouseButton1Click:Connect(function()
	if not selectedButton then return end
	local mainPart = getSeatMain()
	if not mainPart then return end

	local value = tonumber(numValueBox.Text)
	if not value then return end

	local attrName = buttonNameToAttr[selectedButton.Name]
	if not attrName then return end

	mainPart:SetAttribute(attrName, value)
end)


local toggleLoopBtn = gui.MainFrame.ToggleLoopBtn
local loopActive = false

local function isValidLoopValue()
	local val = tonumber(loopNumValueBox.Text)
	return val and val > 0
end

local function updateToggleButton()
	if loopActive then
		toggleLoopBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
		toggleLoopBtn.Text = "On"
	else
		toggleLoopBtn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
		toggleLoopBtn.Text = "Off"
	end
end

toggleLoopBtn.MouseButton1Click:Connect(function()
	if loopActive then
		loopActive = false

		local mainPart = getSeatMain()
		if mainPart then
			local lv = mainPart:FindFirstChild("LinearVelocity")
			if lv and lv:IsA("LinearVelocity") then
				lv.VectorVelocity = Vector3.new(15,0,0)
			end
		end
	else
		if isValidLoopValue() then
			loopActive = true

			local mainPart = getSeatMain()
			if mainPart then
				local lv = mainPart:FindFirstChild("LinearVelocity")
				if lv and lv:IsA("LinearVelocity") then
					local val = tonumber(loopNumValueBox.Text)
					if val and val > 0 then
						lv.VectorVelocity = Vector3.new(val,0,0)
					end
				end
			end
		else
			loopActive = false
		end
	end
	updateToggleButton()
end)


spawn(function()
	while true do
		local mainPart = getSeatMain()
		if mainPart then
			local lv = mainPart:FindFirstChild("LinearVelocity")
			if lv and lv:IsA("LinearVelocity") then
				local val = tonumber(loopNumValueBox.Text)
				local valid = val and val > 0

				if loopActive then
					if valid then
						lv.VectorVelocity = Vector3.new(val,0,0)
					else
						loopActive = false
						updateToggleButton()
					end
				end
			end
		end
		task.wait(0.05)
	end
end)

------------------------- Drll Modifier ------------------------------

local DrillGui = game:GetService("Players").LocalPlayer.PlayerGui:WaitForChild("DrillGui")
local DrillGuiMainF = DrillGui:WaitForChild("MainF")
local DrillGuiBottomF = DrillGuiMainF:WaitForChild("BottomF")

local DrillModifier = Instance.new("Frame")
local ForwardInput = Instance.new("TextBox")
local RetractInput = Instance.new("TextBox")
local ForwardApplyBtn = Instance.new("ImageButton")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local RetractApplyBtn = Instance.new("ImageButton")
local UIAspectRatioConstraint_2 = Instance.new("UIAspectRatioConstraint")
local ExtractBtn = Instance.new("TextButton")
local UIAspectRatioConstraint_3 = Instance.new("UIAspectRatioConstraint")
local Title = Instance.new("TextLabel")
local DrillModifierUIStroke = Instance.new("UIStroke")
local ForwardInputUIstroke = Instance.new("UIStroke")
local RetractInputUIstroke = Instance.new("UIStroke")
local ForwardApplyBtnUIStroke = Instance.new("UIStroke")
local RetractApplyBtnUIStroke = Instance.new("UIStroke")
local ExtractBtnUIStroke = Instance.new("UIStroke")

DrillModifier.Name = "DrillModifier"
DrillModifier.Parent = DrillGuiBottomF
DrillModifier.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
DrillModifier.BackgroundTransparency = 0.500
DrillModifier.BorderColor3 = Color3.fromRGB(0, 0, 0)
DrillModifier.BorderSizePixel = 0
DrillModifier.Position = UDim2.new(0, 0, -4.5, 0)
DrillModifier.Size = UDim2.new(0.610000014, 0, 5, 0)
DrillModifier.Visible = false
DrillModifierUIStroke.Parent = DrillModifier
DrillModifierUIStroke.Color = Color3.fromRGB(255, 255, 127)
DrillModifierUIStroke.Thickness = 1
DrillModifierUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

ForwardInput.Name = "ForwardInput"
ForwardInput.Parent = DrillModifier
ForwardInput.AnchorPoint = Vector2.new(0.0500000007, 0.100000001)
ForwardInput.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ForwardInput.BackgroundTransparency = 0.500
ForwardInput.BorderColor3 = Color3.fromRGB(0, 0, 0)
ForwardInput.BorderSizePixel = 0
ForwardInput.Position = UDim2.new(0.0500000007, 0, 0.100000001, 0)
ForwardInput.Size = UDim2.new(0.449999988, 0, 0.400000006, 0)
ForwardInput.Font = Enum.Font.Arial
ForwardInput.MultiLine = true
ForwardInput.PlaceholderText = "Drill Forward Speed"
ForwardInput.Text = ""
ForwardInput.TextColor3 = Color3.fromRGB(255, 255, 255)
ForwardInput.TextScaled = true
ForwardInput.TextSize = 14.000
ForwardInput.TextWrapped = true
ForwardInput.TextXAlignment = Enum.TextXAlignment.Left
ForwardInputUIstroke.Parent = ForwardInput
ForwardInputUIstroke.Color = Color3.fromRGB(255, 255, 127)
ForwardInputUIstroke.Thickness = 1
ForwardInputUIstroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

RetractInput.Name = "RetractInput"
RetractInput.Parent = DrillModifier
RetractInput.AnchorPoint = Vector2.new(0.0500000007, 0.899999976)
RetractInput.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
RetractInput.BackgroundTransparency = 0.500
RetractInput.BorderColor3 = Color3.fromRGB(0, 0, 0)
RetractInput.BorderSizePixel = 0
RetractInput.Position = UDim2.new(0.0500000007, 0, 0.899999976, 0)
RetractInput.Size = UDim2.new(0.449999988, 0, 0.400000006, 0)
RetractInput.Font = Enum.Font.Arial
RetractInput.MultiLine = true
RetractInput.PlaceholderText = "Drill Retract Speed"
RetractInput.Text = ""
RetractInput.TextColor3 = Color3.fromRGB(255, 255, 255)
RetractInput.TextScaled = true
RetractInput.TextSize = 14.000
RetractInput.TextWrapped = true
RetractInput.TextXAlignment = Enum.TextXAlignment.Left
RetractInputUIstroke.Parent = RetractInput
RetractInputUIstroke.Color = Color3.fromRGB(255, 255, 127)
RetractInputUIstroke.Thickness = 1
RetractInputUIstroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

ForwardApplyBtn.Name = "ForwardApplyBtn"
ForwardApplyBtn.Parent = DrillModifier
ForwardApplyBtn.AnchorPoint = Vector2.new(0.560000002, 0.100000001)
ForwardApplyBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ForwardApplyBtn.BackgroundTransparency = 0.500
ForwardApplyBtn.BorderColor3 = Color3.fromRGB(0, 0, 0)
ForwardApplyBtn.BorderSizePixel = 0
ForwardApplyBtn.Position = UDim2.new(0.57, 0, 0.100000001, 0)
ForwardApplyBtn.Size = UDim2.new(0.400000006, 0, 0.400000006, 0)
ForwardApplyBtn.Image = "rbxassetid://138861967300749"
ForwardApplyBtnUIStroke.Parent = ForwardApplyBtn
ForwardApplyBtnUIStroke.Color = Color3.fromRGB(255, 255, 127)
ForwardApplyBtnUIStroke.Thickness = 1
ForwardApplyBtnUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

UIAspectRatioConstraint.Parent = ForwardApplyBtn

RetractApplyBtn.Name = "RetractApplyBtn"
RetractApplyBtn.Parent = DrillModifier
RetractApplyBtn.AnchorPoint = Vector2.new(0.57, 0.899999976)
RetractApplyBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
RetractApplyBtn.BackgroundTransparency = 0.500
RetractApplyBtn.BorderColor3 = Color3.fromRGB(0, 0, 0)
RetractApplyBtn.BorderSizePixel = 0
RetractApplyBtn.Position = UDim2.new(0.57, 0, 0.899999976, 0)
RetractApplyBtn.Size = UDim2.new(0.400000006, 0, 0.400000006, 0)
RetractApplyBtn.Image = "rbxassetid://138861967300749"
RetractApplyBtnUIStroke.Parent = RetractApplyBtn
RetractApplyBtnUIStroke.Color = Color3.fromRGB(255, 255, 127)
RetractApplyBtnUIStroke.Thickness = 1
RetractApplyBtnUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

UIAspectRatioConstraint_2.Parent = RetractApplyBtn

ExtractBtn.Name = "ExtractBtn"
ExtractBtn.Parent = DrillModifier
ExtractBtn.AnchorPoint = Vector2.new(0.800000012, 0.5)
ExtractBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ExtractBtn.BackgroundTransparency = 0.500
ExtractBtn.BorderColor3 = Color3.fromRGB(0, 0, 0)
ExtractBtn.BorderSizePixel = 0
ExtractBtn.Position = UDim2.new(0.9, 0, 0.5, 0)
ExtractBtn.Size = UDim2.new(0.800000012, 0, 0.800000012, 0)
ExtractBtn.Font = Enum.Font.Arial
ExtractBtn.Text = "End Artifact Extraction"
ExtractBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ExtractBtn.TextScaled = true
ExtractBtn.TextSize = 14.000
ExtractBtn.TextWrapped = true
ExtractBtn.TextXAlignment = Enum.TextXAlignment.Center
ExtractBtnUIStroke.Parent = ExtractBtn
ExtractBtnUIStroke.Color = Color3.fromRGB(255, 255, 127)
ExtractBtnUIStroke.Thickness = 1
ExtractBtnUIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

UIAspectRatioConstraint_3.Parent = ExtractBtn
UIAspectRatioConstraint_3.AspectRatio = 1.2

Title.Name = "Title"
Title.Parent = DrillModifier
Title.AnchorPoint = Vector2.new(0.5, 0)
Title.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1.000
Title.BorderColor3 = Color3.fromRGB(0, 0, 0)
Title.BorderSizePixel = 0
Title.Position = UDim2.new(0.398999989, 0, -0.219999999, 0)
Title.Size = UDim2.new(0.800000012, 0, 0.197189555, 0)
Title.Font = Enum.Font.Arial
Title.Text = "Space Hub  - Drill Modifier"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.TextSize = 14.000
Title.TextWrapped = true
Title.TextXAlignment = Enum.TextXAlignment.Left

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local CommonModule = require(ReplicatedStorage:WaitForChild("CommonModule"))

local function applySpeed(textBox, speedType)
	local value = tonumber(textBox.Text)
	if not value then
		warn("Invalid number")
		return
	end

	for _, drill in pairs(CommonModule.Drills) do
		drill[speedType] = value
	end
end

ForwardApplyBtn.MouseButton1Click:Connect(function()
	applySpeed(ForwardInput, "forwardSpeed")
end)

RetractApplyBtn.MouseButton1Click:Connect(function()
	applySpeed(RetractInput, "retractSpeed")
end)

local isExtracted = false

local function extractArtifact()
	isExtracted = true
	if not DrillGui.Enabled then return end

	local CanvasF = DrillGui.MainF.CanvasF
	local MineProgressF = DrillGui.MainF.MineProgressF

	if CanvasF:FindFirstChild("Circles") then
		for _, circleData in pairs(CanvasF.Circles:GetChildren()) do
			if circleData:IsA("Frame") then
				circleData.BackgroundColor3 = Color3.fromRGB(0,255,0)
			end
		end
	end

	local artifact = LocalPlayer:GetAttribute("drillArtifactName")
	if artifact then
		ReplicatedStorage:WaitForChild("Events").ArtifactEvent:FireServer("endDrilling", {status = true})
	end

	if MineProgressF and MineProgressF.MineBorder and MineProgressF.MineBorder.MineBar then
		MineProgressF.MineBorder.MineBar.Size = MineProgressF.MineBorder.Size
	end

	DrillGui.Enabled = false
	game.Players.LocalPlayer.PlayerGui.ScreenGui.BottomF.ProgressFrame.Visible = true
	game.Players.LocalPlayer.PlayerGui.ScreenGui.BottomF.ToolbarsF.Visible = true
	local tool = game.Players.LocalPlayer.Character:FindFirstChildWhichIsA("Tool")
	if tool and tool:GetAttribute("drill") and tool:FindFirstChild("BeamSource") then
		tool.BeamSource.Beam.Enabled = false
	end
end

ExtractBtn.MouseButton1Click:Connect(function()
	if isExtracted then
		warn("Failed to auto extract")
	else
		extractArtifact()
		isExtracted = false
	end
end)

--------------------- Event ESP -------------------------------------------------------

local GIFTS_LINE_THICKNESS = 1
local GIFTS_OFFSET_Y = 40

for _, name in ipairs({ "GiftsLines", "GiftsBoxes", "GiftsNames" }) do
	local old = CoreGui:FindFirstChild(name)
	if old then old:Destroy() end
end

local GiftsLinesGui = Instance.new("ScreenGui")
GiftsLinesGui.Name = "GiftsLines"
GiftsLinesGui.IgnoreGuiInset = true
GiftsLinesGui.DisplayOrder = 1100
GiftsLinesGui.ResetOnSpawn = false
GiftsLinesGui.Parent = SpaceHubESPFolder
GiftsLinesGui.Enabled = false

local GiftsBoxesGui = Instance.new("ScreenGui")
GiftsBoxesGui.Name = "GiftsBoxes"
GiftsBoxesGui.IgnoreGuiInset = true
GiftsBoxesGui.DisplayOrder = 1101
GiftsBoxesGui.ResetOnSpawn = false
GiftsBoxesGui.Parent = SpaceHubESPFolder
GiftsBoxesGui.Enabled = false

local GiftsNamesGui = Instance.new("ScreenGui")
GiftsNamesGui.Name = "GiftsNames"
GiftsNamesGui.IgnoreGuiInset = true
GiftsNamesGui.DisplayOrder = 1102
GiftsNamesGui.ResetOnSpawn = false
GiftsNamesGui.Parent = SpaceHubESPFolder
GiftsNamesGui.Enabled = false

local GiftsInfos = Instance.new("Frame")
GiftsInfos.Name = "GiftsInfos"
GiftsInfos.Parent = GiftsNamesGui
GiftsInfos.BackgroundTransparency = 0.2
GiftsInfos.BackgroundColor3 = Color3.fromRGB(99, 184, 184)
GiftsInfos.Position = UDim2.fromScale(0.93,0.14)
GiftsInfos.Size = UDim2.fromScale(0.2,0.2)
GiftsInfos.AnchorPoint = Vector2.new(0.95,0.13)

local GiftsInfos_Dragger = Instance.new("UIDragDetector")
GiftsInfos_Dragger.Parent = GiftsInfos

local GiftsInfos_aspect = Instance.new("UIAspectRatioConstraint")
GiftsInfos_aspect.AspectRatio = 5
GiftsInfos_aspect.Parent = GiftsInfos

local GiftsInfos_stroke = Instance.new("UIStroke")
GiftsInfos_stroke.Color = Color3.fromRGB(255,255,255)
GiftsInfos_stroke.Thickness = 1
GiftsInfos_stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
GiftsInfos_stroke.Parent = GiftsInfos

local GiftsInfos_label = Instance.new("TextLabel")
GiftsInfos_label.Parent = GiftsInfos
GiftsInfos_label.BackgroundTransparency = 1
GiftsInfos_label.TextScaled = true
GiftsInfos_label.TextColor3 = Color3.fromRGB(255,255,255)
GiftsInfos_label.AnchorPoint = Vector2.new(0.5,0.5)
GiftsInfos_label.Position = UDim2.fromScale(0.5,0.5)
GiftsInfos_label.Size = UDim2.fromScale(0.9,0.9)
GiftsInfos_label.Font = Enum.Font.Arimo
GiftsInfos_label.TextXAlignment = Enum.TextXAlignment.Left
GiftsInfos_label.Text = "Total Gifts: 0  | Remaining Gifts: 0 "

local GiftsTracked = {}
local Gifts_TotalCount = 0

local function Gifts_updateInfo()
	local remaining = 0
	for _ in pairs(GiftsTracked) do
		remaining += 1
	end
	GiftsInfos_label.Text =
		"Total Gifts: "..Gifts_TotalCount.."  | Remaining Gifts: "..remaining.." "
end

local function Gifts_getColor(objName)
	if objName == "Green Gift" then
		return Color3.fromRGB(0,255,0)
	elseif objName == "Red Gift" then
		return Color3.fromRGB(255,0,0)
	elseif objName == "Blue Gift" then
		return Color3.fromRGB(0,170,255)
	elseif objName == "Golden Gift" then
		return Color3.fromRGB(255,215,0)
	end
	return Color3.fromRGB(255,255,255)
end

local function Gifts_makeLine()
	local Gifts_F = Instance.new("Frame")
	Gifts_F.Size = UDim2.fromOffset(10, GIFTS_LINE_THICKNESS)
	Gifts_F.AnchorPoint = Vector2.new(0.5,0.5)
	Gifts_F.BorderSizePixel = 0
	Gifts_F.Visible = false
	Gifts_F.Parent = GiftsLinesGui
	return Gifts_F
end

local function Gifts_makeBox()
	local Gifts_box = Instance.new("Frame")
	Gifts_box.AnchorPoint = Vector2.new(0.5,0.5)
	Gifts_box.BackgroundTransparency = 1
	Gifts_box.Visible = false
	Gifts_box.Parent = GiftsBoxesGui

	local Gift_aspect = Instance.new("UIAspectRatioConstraint")
	Gift_aspect.AspectRatio = 1
	Gift_aspect.Parent = Gifts_box
	local Gifts_stroke = Instance.new("UIStroke")
	Gifts_stroke.Thickness = 1.5
	Gifts_stroke.Parent = Gifts_box

	return Gifts_box
end

local function Gifts_makeName()
	local Gifts_label = Instance.new("TextLabel")
	Gifts_label.AnchorPoint = Vector2.new(0.5,1)
	Gifts_label.BackgroundTransparency = 1
	Gifts_label.TextScaled = true
	Gifts_label.Font = Enum.Font.Gotham
	Gifts_label.Visible = false
	Gifts_label.Parent = GiftsNamesGui

	local Gift_aspect = Instance.new("UIAspectRatioConstraint")
	Gift_aspect.AspectRatio = 5
	Gift_aspect.Parent = Gifts_label

	return Gifts_label
end

local function Gifts_addObject(obj)
	if not obj:IsA("BasePart") then return end
	if GiftsTracked[obj] then return end

	if obj:GetAttribute("gift") ~= true then return end
	local hp = obj:GetAttribute("hitpoints")
	if type(hp) ~= "number" or hp <= 0 then return end

	Gifts_TotalCount += 1

	GiftsTracked[obj] = {
		line = Gifts_makeLine(),
		box = Gifts_makeBox(),
		nameLabel = Gifts_makeName()
	}

	Gifts_updateInfo()

	obj:GetAttributeChangedSignal("hitpoints"):Connect(function()
		local newHp = obj:GetAttribute("hitpoints")
		if type(newHp) ~= "number" or newHp <= 0 then
			local data = GiftsTracked[obj]
			if data then
				data.line:Destroy()
				data.box:Destroy()
				data.nameLabel:Destroy()
				GiftsTracked[obj] = nil
				Gifts_updateInfo()
			end
		end
	end)
end

local function Gifts_bindMinerals(folder)
	for _, obj in ipairs(folder:GetChildren()) do
		Gifts_addObject(obj)
	end
	folder.ChildAdded:Connect(Gifts_addObject)
end

local OtherFolder = workspace:FindFirstChild("Other")
if OtherFolder then
	local MineralsFolder = OtherFolder:FindFirstChild("LocalMinerals")
	if MineralsFolder then
		Gifts_bindMinerals(MineralsFolder)
	end
end

workspace.ChildAdded:Connect(function(obj)
	if obj.Name == "Other" then
		local MineralsFolder = obj:WaitForChild("LocalMinerals",5)
		if MineralsFolder then
			Gifts_bindMinerals(MineralsFolder)
		end
	end
end)

RunService.RenderStepped:Connect(function()
	local vp = Camera.ViewportSize
	local srcX = vp.X/2
	local srcY = GIFTS_OFFSET_Y

	for obj, data in pairs(GiftsTracked) do
		if obj.Parent then
			local pos, visible = Camera:WorldToViewportPoint(obj.Position)
			if visible then
				local dx = pos.X - srcX
				local dy = pos.Y - srcY
				local dist = math.sqrt(dx*dx + dy*dy)

				local color = Gifts_getColor(obj.Name)

				data.line.BackgroundColor3 = color
				data.line.Visible = true
				data.line.Size = UDim2.fromOffset(dist, GIFTS_LINE_THICKNESS)
				data.line.Position = UDim2.fromOffset((pos.X+srcX)/2,(pos.Y+srcY)/2)
				data.line.Rotation = math.deg(math.atan2(dy,dx))

				data.box.Visible = true
				data.box.Position = UDim2.fromOffset(pos.X,pos.Y)
				local scale = math.clamp(pos.Z/400,0.01,0.045)
				data.box.Size = UDim2.fromScale(scale,scale)
				data.box.UIStroke.Color = color

				local distText = math.floor((Camera.CFrame.Position - obj.Position).Magnitude)
				data.nameLabel.TextColor3 = color
				data.nameLabel.Text = obj.Name.." | "..distText.." studs"
				data.nameLabel.Position = UDim2.fromOffset(pos.X,pos.Y-12)
				data.nameLabel.Size = UDim2.fromScale(0.1,0.1)
				data.nameLabel.Visible = true
			else
				data.line.Visible = false
				data.box.Visible = false
				data.nameLabel.Visible = false
			end
		end
	end
end)


print("Successfully Executed Space Hub ESP Container ")
-------------------------------------------------------------------------- end ------------------
